<!doctype html>
<html lang="ja">
    <head>
        <title>第4回 課題 (2025 改訂中） - 東北大学プログラミング演習B (C#)</title>
        <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<link rel="stylesheet" href="./css/cs.css">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz@20" rel="stylesheet">
<script type="text/javascript" src="./js/preprocess.js"></script>
    </head>
    <body>
        <header>
                      <nav>
              <ul>
                <li class="top"><a href="./">ホーム</a></li>
                <!-- <li><a href="./setup.html">環境構築1</a></li> -->
                <!-- <li><a href="./setup_gui.html">環境構築2</a></li> -->
                <li class="dd"><span class="ddt">環境構築</span>
                  <ul>
                    <li><a href="./setup.html">環境構築1（C#/F#共通）</a></li>
                    <li><a href="./setup_gui.html">環境構築2（C#演習用）</a></li>
                    <li><a href="./setup_q.html">確認用課題</a></li>
                  </ul>
                </li>
                <li class="dd"><span class="ddt">講義資料</span>
                  <ul> 
                    <li><a href="./w1.html">第1回資料</a><a href="./q1.html">第1回課題</a></li>
                    <li><a href="./w2.html">第2回資料</a><a href="./q2.html">第2回課題</a></li>
                    <li><a href="./w3.html">第3回資料</a><a href="./q3.html">第3回課題</a></li>
                    <li><a href="./w4.html">第4回資料</a><a href="./q4.html">第4回課題</a></li>
                    <li><a href="./w5.html">第5回資料</a><a href="./q5.html">第5回課題</a></li>
                    <li><a href="./w6.html">第6回資料</a><a href="./q6.html">第6回課題</a></li>
                  </ul>
                </li>
                <li><a href="./links.html">参考書など</a></li>
             </ul>
            </nav>

            
               <h1>第4回 課題 (2025 改訂中）</h1>
             
            
               <p class="last-update">最終更新: 2025-04-11 23:20:13</p> 
            
            <div class="qnav">
              <ul>
                <li><a href="w4.html">講義資料</a></li><li><a href="q4.html">課題</a></li>
              </ul>
            </div>   
        </header>

        <main role="main" class="with-right-nav">
          <nav class="toc">
            <ul>
              <li><a href="#課題の進め方">課題の進め方</a> </li>
              <li><a href="#基本課題">基本課題</a></li>
              <li><a href="#発展課題">発展課題</a> </li>
            </ul>
          </nav>
          <section class="mainbody">
            <section id="課題の進め方" class="level2">
<h2>課題の進め方</h2>
<p>基本的には適当なプロジェクト/ソリューションを作って課題を進めた上で，<code>Program.cs</code>のみ（特に他に指示がなければ）を提出する．</p>
<p><strong>他の人（受講者・非受講者両方）に解答内容（一部でも）を見せない</strong>，そして<strong>他の人の解答内容（一部でも）を見ない</strong>ようお願いします．特に，<strong>公開の場所に解答を置かないようお願いします．</strong>githubやbitbucket等は使える人は使えばよいと思いますが，<strong>privateレポジトリにする</strong>ようにお願いします．</p>
<section id="プロジェクトソリューションの作成" class="level3">
<h3>プロジェクト/ソリューションの作成</h3>
<div class="note">
<div class="title">
<p>Note</p>
</div>
<p>再掲：プロジェクトは一つの実行形式やライブラリを作成するためのコード等を全てまとめたものであり，ソリューションは関連するプロジェクトをまとめたもの（参考：<a href="https://docs.microsoft.com/en-us/visualstudio/ide/solutions-and-projects-in-visual-studio?view=vs-2022">What are solutions and projects in Visual Studio</a>）．</p>
</div>
<p>適当な名前（たとえば課題3の解答なので<code>Q3</code>にするなど）のフォルダを適当な場所に作成し，
VSCodeで作成したフォルダを開く．そして，VSCode内のターミナルで以下を実行する．</p>
<pre class="text"><code>dotnet new console -o .</code></pre>
</section>
<section id="課題の実施" class="level3">
<h3>課題の実施</h3>
<p><code>Program.cs</code>を問題文の指示の通りに編集する（課題によっては他のファイルも．ただし<strong>提出・採点手続きの簡略化のため提出する.csファイルは<code>Program.cs</code>のみ</strong>）．作成した.csファイルには先頭部分に<strong>学籍番号と名前をコメントとして含める</strong>こと．なので，たとえば学籍番号Z0TB9999の東北 大学さんの提出ファイルは</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Z0TB9999</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">// 東北 大学</span></span></code></pre></div>
<p>という行から始まる．</p>
</section>
<section id="提出" class="level3">
<h3>提出</h3>
<p>できあがった <code>Program.cs</code>をClassroom内の当該回の「課題」より提出する．最初のステップで作成したフォルダにあるはず．また問題文に指示がある場合はそのファイル（例：課題4のitems.txt）も提出する．提出前には以下を確認しよう．</p>
<ul class="task-list">
<li><label><input type="checkbox" />提出プログラムコードのファイル名は<code>Program.cs</code>になっているか</label></li>
<li><label><input type="checkbox" />提出するファイルに<em>学籍番号と名前</em>がコメントとして含まれているか</label></li>
<li><label><input type="checkbox" />文献やWebサイトを参考にした場合は<em>文献の情報やURLおよびアクセス日</em>に加えて<em>元文献のどの部分を参考にしたのか</em>が<em>コードの当該箇所</em>付近のコメントとして記述されているか</label></li>
<li><label><input type="checkbox" />友人と相談した・された場合はその<em>友人の名前</em>および<em>大雑把な相談の内容</em>がコメントとして書かれているか</label>
<ul>
<li>ただし，友人の解答を見ない（一部でも），そして友人に解答を見せない（一部でも）ようお願いします</li>
</ul></li>
<li><label><input type="checkbox" />TA・教員と相談した場合は，その旨と<em>大雑把な相談の内容</em>がコメントとして書かれているか</label></li>
</ul>
</section>
</section>          
            <section id="基本課題" class="level2">
<h2>基本課題</h2>
<section id="その1" class="level3">
<h3>その1</h3>
<p>品目と個数の組をファイルから読みとり，それを個数が降順（大きい順）になるように並び変えたものを出力したい．すなわち，中身が</p>
<pre class="text"><code>Chocolate,2
Chips,4
Candy,5</code></pre>
<p>であるようなファイルを読んで，</p>
<pre class="text"><code>Candy,5
Chips,4
Chocolate,2</code></pre>
<p>ような出力を行いたい．</p>
<p>そのために，<code>Dictionary&lt;string, int&gt;</code>を用いることを考える．より具体的には，上記のファイルを読んで</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dict<span class="op">[</span><span class="st">&quot;Chocolate&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>dict<span class="op">[</span><span class="st">&quot;Chips&quot;</span><span class="op">]</span>     <span class="op">=</span> <span class="dv">4</span><span class="op">;</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>dict<span class="op">[</span><span class="st">&quot;Candy&quot;</span><span class="op">]</span>     <span class="op">=</span> <span class="dv">5</span><span class="op">;</span> </span></code></pre></div>
<p>としたのと同等の<code>Dictionary</code>を作成し，その後で</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">// LINQのextension methodを使うともうすこし簡潔に書ける</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> sortedKeys <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span><span class="dt">string</span><span class="op">&gt;(</span>dict<span class="op">.</span><span class="fu">Keys</span><span class="op">);</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>sortedKeys<span class="op">.</span><span class="fu">Sort</span><span class="op">(</span> <span class="op">(</span>k1<span class="op">,</span> k2<span class="op">)</span> <span class="op">=&gt;</span> dict<span class="op">[</span>k2<span class="op">].</span><span class="fu">CompareTo</span><span class="op">(</span>dict<span class="op">[</span>k1<span class="op">])</span> <span class="op">);</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> <span class="op">(</span><span class="dt">var</span> k <span class="kw">in</span> sortedKeys<span class="op">)</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>   Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">&quot;{0}, {1}&quot;</span><span class="op">,</span> k<span class="op">,</span> dict<span class="op">[</span>k<span class="op">]);</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>を行うことにより個数の降順で出力を行うことを考える．</p>
<p>上記を達成するため，以下のプログラムの空欄を埋めて完成させよ．</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// あなたの学籍番号</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">// あなたの名前</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> System<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> System<span class="op">.</span><span class="fu">IO</span><span class="op">;</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> System<span class="op">.</span><span class="fu">Collections</span><span class="op">.</span><span class="fu">Generic</span><span class="op">;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Program</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>   <span class="kw">static</span> Dictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">int</span><span class="op">&gt;</span> <span class="fu">readDictionaryFromFile</span><span class="op">(</span><span class="dt">string</span> filepath<span class="op">)</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>   <span class="op">{</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>      Dictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">int</span><span class="op">&gt;</span> dict <span class="op">=</span> <span class="kw">new</span> Dictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">int</span><span class="op">&gt;();</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>      <span class="co">// 実装する．</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>      <span class="co">//</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>      <span class="co">// 与えられたパス filepath にファイルが存在し，そのファイルの中身が，各行が</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>      <span class="co">// </span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>      <span class="co">//    アイテム名,個数</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>      <span class="co">//</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>      <span class="co">// という形式であるようなテキストファイルになっているときに，</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>      <span class="co">// 各行に含まれているアイテム名と個数の対応をディクショナリ dict に追加する．</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>      <span class="co">// ファイルの中身のより詳細な形式については後述</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>      <span class="co">//</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>      <span class="co">// *ファイルのI/Oに関する例外はこのメソッドでは処理しない*</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> dict<span class="op">;</span> </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>   <span class="op">}</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>   <span class="co">// 変更しない</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>   <span class="kw">static</span> <span class="dt">void</span> <span class="fu">printItemsDescending</span><span class="op">(</span>Dictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">int</span><span class="op">&gt;</span> dict<span class="op">)</span> </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>   <span class="op">{</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>      <span class="co">// LINQのextension methodを使うともうすこし簡潔に書ける</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>      <span class="dt">var</span> sortedKeys <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span><span class="dt">string</span><span class="op">&gt;(</span>dict<span class="op">.</span><span class="fu">Keys</span><span class="op">);</span> </span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>      sortedKeys<span class="op">.</span><span class="fu">Sort</span><span class="op">(</span> <span class="op">(</span>k1<span class="op">,</span> k2<span class="op">)</span> <span class="op">=&gt;</span> dict<span class="op">[</span>k2<span class="op">].</span><span class="fu">CompareTo</span><span class="op">(</span>dict<span class="op">[</span>k1<span class="op">])</span> <span class="op">);</span> </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>      <span class="kw">foreach</span> <span class="op">(</span><span class="dt">var</span> k <span class="kw">in</span> sortedKeys<span class="op">)</span> </span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>      <span class="op">{</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>         Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">&quot;{0}, {1}&quot;</span><span class="op">,</span> k<span class="op">,</span> dict<span class="op">[</span>k<span class="op">]);</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>   <span class="op">}</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>   <span class="kw">static</span> <span class="dt">void</span> <span class="fu">ProcFile</span><span class="op">(</span><span class="dt">string</span> filepath<span class="op">)</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>   <span class="op">{</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>      <span class="co">// 当然，args[0]が開けなければ例外が発生するが *その1では*無視</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">printDescending</span><span class="op">(</span> <span class="fu">readDictionaryFromFile</span><span class="op">(</span> filepath <span class="op">)</span> <span class="op">);</span> </span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>   <span class="op">}</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>   <span class="co">// 変更しない</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>   <span class="kw">static</span> <span class="dt">void</span> <span class="fu">Main</span><span class="op">(</span><span class="dt">string</span><span class="op">[]</span> args<span class="op">)</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>   <span class="op">{</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>      <span class="kw">if</span> <span class="op">(</span>args<span class="op">.</span><span class="fu">Length</span> <span class="op">&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>         Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">&quot;引数の数が不足しています：ファイルパスが必要です．&quot;</span><span class="op">);</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>         <span class="kw">return</span><span class="op">;</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ProcFile</span><span class="op">(</span> args<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">);</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>   <span class="op">}</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<section id="動作確認例" class="level4">
<h4>動作確認例</h4>
<div class="Instructions">
<ol type="1">
<li><p>まず，<code>items.txt</code>を準備する．VSCodeで以下の中身の<code>items.txt</code>を<code>.csproj</code>と同じフォルダに作成する．</p>
<pre class="text"><code>Chocolate,2
Chips,0
Candy,5</code></pre></li>
<li><p><code>.csproj</code>と同じフォルダに移動し，以下を行う．<code>$</code>はプロンプトを表し，そこから右がユーザが入力する部分を表す（<code>$</code>自体は入力しない）．</p>
<pre class="console"><code>$ dotnet run -- items.txt
Candy, 5
Chocolate, 2
Chips, 0</code></pre></li>
</ol>
</div>
<p><strong>自身がプログラムの動作確認に使用した入力ファイル（上記の<code>items.txt</code>）も一つ以上提出物に含めること（発展課題も同じ）</strong>．ファイル名は<code>items.txt</code>あるいは<code>items1.txt</code>や<code>items2.txt</code>等とする．</p>
</section>
<section id="入力ファイルの形式" class="level4">
<h4>入力ファイルの形式</h4>
<!-- markdownlint-disable MD038 -->
<ul>
<li><p>各行が</p>
<pre class="text"><code>品目名,個数</code></pre>
<p>という形になっている．基本課題においては，品目名，<code>,</code>，および個数の前後に余計な空白は含まれない（発展課題で変更あり）</p></li>
<li><p>個数は<code>int</code>で表現可能な数に比べて十分に小さいとする（オーバフローを考える必要はない）．<em>簡便のため負数や0は許すことにする</em>．</p></li>
<li><p>品目名は<code>,</code>および前後の空白は含まない．たとえば<code></code>（空白文字からなる文字列）や<code>X</code>（空白文字，'X'，空白文字からなる文字列）などはここで言う品目名ではない．途中の（非改行）空白は含んでもよい（例：<code>Ruby Chocolate</code>）．</p></li>
<li><p>基本課題では各行の品目名に重複を許さない．</p></li>
<li><p>基本課題では上記の形式でないファイルが与えられたときの挙動は考えなくてよい．</p></li>
</ul>
<div class="note">
<div class="title">
<p>Note</p>
</div>
<p>上記においてプログラムにコマンドライン引数を渡すために，<code>dotnet run</code>コマンドを利用していたが，同様のことをVSCodeで行うのは少々大変である．</p>
</div>
<!-- 
> [!NOTE]
> ``items.txt``を相対パス``./items.txt``でアクセスするためには，``items.txt``は作業フォルダ直下に置く必要がある．[環境設定1](./setup.html)で紹介
> した方法でプロジェクトを作成しプログラムを実行しているのならば，VS Codeで開いたフォルダ（プロジェクトルート）直下に置いたので問題がないはずだ．
>
> そうでない場合（Visual Studioを使用している場合など）は以下のいずれかを行う．
>
> * .csprojの``<PropertyGroup>...</PropertyGroup>``内に以下の行を追加する．
>
>   ```xml
>        <StartWorkingDirectory>$(MSBuildProjectDirectory)</StartWorkingDirectory>
>   ```
>
> * Windows版のVisual Studioを使用している場合は，プロジェクト名を右クリックして出てくるコンテキストメニューから「プロパティ」を選択し，「デバッグ」の「作業ディレクトリ」を当該 .csproj ファイルの直上のディレクトリに設定する．
>
> * Mac版のVisual Studioを使用している場合は，プロジェクト名をダブルクリックして出てくるウィンドウの「実行」>「構成」> 「Default」の 「作業ディレクトリ」を当該 .csproj ファイルの直上のディレクトリに設定する． -->
<div class="tip">
<div class="title">
<p>Tip</p>
</div>
<p>個数の部分を処理するには，<code>Int32.Parse(string)</code>を使うとよい．</p>
<p>この関数の使い方は以下のプログラムを参考にせよ．</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> System<span class="op">;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">// 参考：https://docs.microsoft.com/en-us/dotnet/api/system.int32.parse?view=net-6.0#system-int32-parse(system-string)</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Int32Example </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="dt">void</span> <span class="fu">TryParseInt</span><span class="op">(</span><span class="dt">string</span> s<span class="op">)</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span>           </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">try</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> n <span class="op">=</span> Int32<span class="op">.</span><span class="fu">Parse</span><span class="op">(</span>s<span class="op">);</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>s <span class="op">+</span> <span class="st">&quot; ==&gt; &quot;</span> <span class="op">+</span> n<span class="op">);</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">catch</span><span class="op">(</span>FormatException e<span class="op">)</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>            Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>s <span class="op">+</span> <span class="st">&quot;: ill-formed&quot;</span><span class="op">);</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">catch</span><span class="op">(</span>OverflowException e<span class="op">)</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>            Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>s <span class="op">+</span> <span class="st">&quot;: overflow&quot;</span><span class="op">);</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">catch</span><span class="op">(</span>ArgumentNullException e<span class="op">)</span> </span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>            Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">&quot;the input is null&quot;</span><span class="op">);</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="dt">void</span> <span class="fu">Main</span><span class="op">()</span> </span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="st">&quot;1234&quot;</span><span class="op">);</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="st">&quot;-1234&quot;</span><span class="op">);</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="st">&quot;0xbeef&quot;</span><span class="op">);</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="st">&quot;+34&quot;</span><span class="op">);</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="st">&quot;3e10&quot;</span><span class="op">);</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="st">&quot;011&quot;</span><span class="op">);</span> </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="st">&quot;1,000&quot;</span><span class="op">);</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>        <span class="fu">TryParseInt</span><span class="op">(</span><span class="dt">string</span><span class="op">.</span><span class="fu">Join</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">,</span> <span class="kw">new</span> <span class="dt">string</span><span class="op">[]</span> <span class="op">{</span> <span class="st">&quot;1&quot;</span><span class="op">,</span> <span class="st">&quot;000&quot;</span><span class="op">,</span> <span class="st">&quot;000&quot;</span><span class="op">,</span> <span class="st">&quot;000&quot;</span><span class="op">,</span> <span class="st">&quot;000&quot;</span> <span class="op">}));</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>上のコードの出力</p>
<pre class="text"><code>1234 ==&gt; 1234
-1234 ==&gt; -1234
0xbeef: ill-formed
+34 ==&gt; 34
3e10: ill-formed
011 ==&gt; 11
1,000: ill-formed
1000000000000: overflow</code></pre>
</div>
</section>
</section>
<section id="その2" class="level3">
<h3>その2</h3>
<p>基本課題その1で作成したプログラムの<code>ProcFile</code>を変更し，ファイルのオープンおよびファイルからの読取時に発生した例外を適切に捕捉し，ファイルが正常に開けなかった旨を標準出力に通知するようにせよ．少なくとも以下は捕捉するようにする．</p>
<ul>
<li><code>ArgumentException</code></li>
<li><code>UnauthorizedAccessException</code></li>
<li><code>IOException</code></li>
</ul>
<div class="tip">
<div class="title">
<p>Tip</p>
</div>
<p><code>File.ReadAllLines()</code>や<code>File.OpenText</code>，<code>StreamReader.ReadLine</code>が発生する可能性のある例外を捕捉する．どんな例外が発生しうるかは当該メソッドの以下のリファレンスを参照：</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.readalllines?view=net-8.0#system-io-file-readalllines(system-string)" class="uri">https://learn.microsoft.com/en-us/dotnet/api/system.io.file.readalllines?view=net-8.0#system-io-file-readalllines(system-string)</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.file.opentext?view=net-8.0" class="uri">https://learn.microsoft.com/en-us/dotnet/api/system.io.file.opentext?view=net-8.0</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.readline?view=net-8.0#system-io-streamreader-readline" class="uri">https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.readline?view=net-8.0#system-io-streamreader-readline</a></li>
</ul>
</div>
<p><strong>注意：<code>readDictionaryFromFile(string)</code>ではこれらの例外は捕捉しない</strong>（発展課題においてもそう）．</p>
<section id="動作確認の例" class="level4">
<h4>動作確認の例</h4>
<p>以下のようなパスを与えてみるとよい</p>
<ul>
<li><p>空文字列</p></li>
<li><p>存在しないファイルへのパス</p></li>
<li><p>存在しないフォルダ以下のファイルへのパス</p></li>
<li><p>読み取り権限をはずしたファイルへのパス</p></li>
<li><p>(Windows) <code>"???.txt"</code> や <code>"‪C.txt"</code>（←<code>"</code>と<code>C</code>の間にゼロ幅文字が入っている）</p></li>
<li><p>次のような長いファイル名を含むパス</p>
<pre class="text"><code>looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong.txt</code></pre></li>
</ul>
</section>
</section>
</section>
<section id="発展課題" class="level2">
<h2>発展課題</h2>
<div class="important">
<div class="title">
<p>Important</p>
</div>
<p>本課題を完了できたのならば本課題の解答のみを提出すればよく，基本課題の解答は提出する必要はない．</p>
</div>
<p>基本課題で作成した<code>readDictionaryFromFile(string)</code>を以下のように拡張せよ（選択式ではなく両方行う）．</p>
<ul>
<li><p>引数として渡すテキストファイルに同じ品目が数含まれていた場合にそれらの個数を合計するようにせよ．</p>
<div class="tip">
<div class="title">
<p>Tip</p>
</div>
<p>ディクショナリにキーが含まれているかどうかを確認するには<code>ContainsKey(TKey)</code>メソッドを用いることができる．たとえば式</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dict<span class="op">.</span><span class="fu">ContainsKey</span><span class="op">(</span> k <span class="op">)</span> </span></code></pre></div>
<p>の評価結果は<code>k</code>が<code>dict</code>に含まれていれば<code>true</code>，そうでなければ<code>false</code>である．</p>
</div></li>
<li><p>入力テキストファイルにコメントや余計な空白，空行が入っていても正常に読みこめるようにせよ．品目名は空白で始まったり終わったりはしなかったことを思い出してほしい（途中に空白を含んでいてもよい）．ここで，"#"で始まる行をコメントとする（<em>"#"が行頭でない場合はコメントでない</em>のに注意）．また，空行は空白を含んでいてもよい．また，ある行において指定されたフォーマットで解釈することに失敗した場合には，<code>readDictionaryFromFile(string)</code>はその行以前までの行を読み取った結果から得られる辞書を返すようにする．ここで，指定されたフォーマットで解釈できない行とは，たとえば以下のようなものである．</p>
<ul>
<li><p>コメント行ではない行で<code>,</code>を含まない，あるいは2個以上含む行．たとえば：</p>
<pre class="text"><code>   #コメントでなくコンマを含まない行</code></pre>
<pre class="text"><code>Chocolate , 12, Candy , 34 </code></pre></li>
<li><p>コメント行ではない行で<code>,</code>を厳密に1つ含んでいるが，<code>,</code>の右側に整数以外が来ている．たとえば：</p>
<pre class="text"><code>Candy, Three</code></pre>
<p>ここで整数以外とは<code>Int32.Parse()</code>が失敗するものとする．</p></li>
</ul></li>
</ul>
<section id="期待される動作例" class="level3">
<h3>期待される動作例</h3>
<!-- markdownlint-disable MD032 -->
<!-- markdownlint-disable MD009 -->
<div class="scroll-wrapper horizontal table">
<div class="scroll-box horizontal">
<table>
<thead>
<tr>
<th>
入力テキストファイルの中身
</th>
<th>
期待される出力
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<pre>
Chocolate,2
Chips,14
Candy,5
Chocolate,40
Chips,-14
</pre>
</td>
<td>
<pre>
Chocolate, 42
Candy, 5
Chips, 0
</pre>
</td>
</tr>
<tr>
<td>
<pre>
#コメント行
Chocolate,  2
   Chips ,14  

Candy,5
Chocolate,40
</pre>
</td>
<td>
<pre>
Chocolate, 42
Chips, 14
Candy, 5
</pre>
</td>
</tr>
<tr>
<td>
<pre>
# コメント行
Chocolate,  2
   Chips ,14  
# 空行は空白を含んでいてもよい
      
Candy,5
Chocolate,40
      #コメントでない行
Candy,25
</pre>
</td>
<td>
<pre>
Chocolate, 42
Chips, 14
Candy, 5
</pre>
</td>
</tr>
<tr>
<td>
<pre>
# 品目名は空白を含んでいてよい
Ruby Chocolate, 6
# 品目名が数字なのは許される
100 , 5
# 品目名に#は許される
 ####  , 9
 # なのでこれも正しく処理できる行, 3
# 個数の部分にはInt32.Parse()が失敗するようなものは許さない
something,ten
</pre>
</td>
<td>
<pre>
####, 9
Ruby Chocolate, 6
100, 5
# なのでこれも正しく処理できる行, 3
</pre>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- markdownlint-enable MD009 -->
<!-- markdownlint-enable MD032 -->
</section>
</section>
          </section>
        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
