<!doctype html>
<html lang="ja">
    <head>
        <title>第5回 GUIプログラミング - 東北大学プログラミング演習B (C#)</title>
        <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<link rel="stylesheet" href="./css/cs.css">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz@20" rel="stylesheet">
<script type="text/javascript" src="./js/preprocess.js"></script>
    </head>
    <body>
        <header>
                      <nav>
              <ul>
                <li class="top"><a href="./">ホーム</a></li>
                <!-- <li><a href="./setup.html">環境構築1</a></li> -->
                <!-- <li><a href="./setup_gui.html">環境構築2</a></li> -->
                <li class="dd"><span class="ddt">環境構築</span>
                  <ul>
                    <li><a href="./setup.html">環境構築1（C#/F#共通）</a></li>
                    <li><a href="./setup_gui.html">環境構築2（C#演習用）</a></li>
                    <li><a href="./setup_q.html">確認用課題</a></li>
                  </ul>
                </li>
                <li class="dd"><span class="ddt">講義資料</span>
                  <ul> 
                    <li><a href="./w1.html">第1回資料</a><a href="./q1.html">第1回課題</a></li>
                    <li><a href="./w2.html">第2回資料</a><a href="./q2.html">第2回課題</a></li>
                    <li><a href="./w3.html">第3回資料</a><a href="./q3.html">第3回課題</a></li>
                    <li><a href="./w4.html">第4回資料</a><a href="./q4.html">第4回課題</a></li>
                    <li><a href="./w5.html">第5回資料</a><a href="./q5.html">第5回課題</a></li>
                    <li><a href="./w6.html">第6回資料</a><a href="./q6.html">第6回課題</a></li>
                  </ul>
                </li>
                <li><a href="./links.html">参考書など</a></li>
             </ul>
            </nav>

            
               <h1>第5回 GUIプログラミング</h1>
             
            
               <p class="last-update">最終更新: 2024-05-17 12:13:11</p> 
            
            <div class="qnav">
              <ul>
                <li><a href="w5.html">講義資料</a></li><li><a href="q5.html">課題</a></li>
              </ul>
            </div>   
        </header>

        <main role="main" class="with-right-nav">
            <nav class="toc">
<ul>
<li><a href="#formクラス" id="toc-formクラス"><code>Form</code>クラス</a></li>
<li><a href="#コントロールgui部品" id="toc-コントロールgui部品">コントロール（GUI部品）</a></li>
<li><a href="#コンテナコントロールを保持するもの" id="toc-コンテナコントロールを保持するもの">コンテナ（コントロールを保持するもの）</a></li>
<li><a href="#レイアウト" id="toc-レイアウト">レイアウト</a>
<ul>
<li><a href="#stacklayoutの例" id="toc-stacklayoutの例"><code>StackLayout</code>の例</a></li>
<li><a href="#tablelayoutの例" id="toc-tablelayoutの例"><code>TableLayout</code>の例</a></li>
<li><a href="#レイアウトを組み合せる" id="toc-レイアウトを組み合せる">レイアウトを組み合せる</a></li>
</ul></li>
<li><a href="#ボタンを押したときの動作" id="toc-ボタンを押したときの動作">ボタンを押したときの動作</a>
<ul>
<li><a href="#イベントハンドラの登録" id="toc-イベントハンドラの登録">イベントハンドラの登録</a></li>
<li><a href="#匿名関数ラムダ式" id="toc-匿名関数ラムダ式">匿名関数（ラムダ式）</a></li>
</ul></li>
</ul>
</nav>
<section class="mainbody"><p>オープンソースかつクロスプラットフォームのGUIライブラリ<a href="https://github.com/picoe/Eto">Eto.Forms</a>を用いて，GUIプログラムを作成してみよう．この演習をすすめる前には<a href="./setup_gui.html">環境構築2</a>を完了させておこう．</p>
<section id="formクラス" class="level2">
<h2><code>Form</code>クラス</h2>
<p>いわゆるウィンドウを表すクラス．</p>
<p>Eto.Formsのテンプレートからデフォルト設定で生成されるコードは，以下のように，</p>
<ul>
<li>Formの派生クラスを定義するコードと，</li>
<li>そのフォームからなるGUIアプリケーションを実行するコード（バックエンド毎．デフォルトだとMac，Wpf，GTKの3つ）</li>
</ul>
<p>の二つの部分からなっている．</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// PROJECTNAME/MainForm.cs</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">// PROJECTNAMEの部分は dotnet new etoapp を実行したディレクトリ名．</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">//（-oや-nで陽に指定しなければ）下記のコードが含まれているプロジェクトの名前でもある．</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> System<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Eto<span class="op">.</span><span class="fu">Forms</span><span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Eto<span class="op">.</span><span class="fu">Drawing</span><span class="op">;</span> </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> PROJECTNAME </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// partialはMainFormの定義を分割可能にする．ここでは不要</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// publicは必要．コンパイル単位が異なるため．</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">partial</span> <span class="kw">class</span> MainForm <span class="op">:</span> Form </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>       <span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span> </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>       <span class="op">{</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>       <span class="co">// 作成される Form にいろいろなGUI部品を追加</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>       <span class="op">}</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// PROJECTNAME.BACKEND/Program.cs</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">// BACKENDの部分は（dotnet new etoappの際に陽に指定しなければ）MacかWpfかGTK</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> System<span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Eto<span class="op">.</span><span class="fu">Forms</span><span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> PROJECTNAME<span class="op">.</span><span class="fu">BACKEND</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> Program</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">[</span>STAThread<span class="op">]</span> <span class="co">// 属性．COMのスレッドモデルをsingle-threaded apartmentに指定する…らしい．</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">// この public も必須ではない</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> <span class="kw">static</span> <span class="dt">void</span> <span class="fu">Main</span><span class="op">(</span><span class="dt">string</span><span class="op">[]</span> args<span class="op">)</span>           </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Macの場合</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            <span class="kw">new</span> <span class="fu">Application</span><span class="op">(</span>Eto<span class="op">.</span><span class="fu">Platforms</span><span class="op">.</span><span class="fu">Mac64</span><span class="op">).</span><span class="fu">Run</span><span class="op">(</span><span class="kw">new</span> <span class="fu">MainForm</span><span class="op">());</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Wpfの場合</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="kw">new</span> <span class="fu">Application</span><span class="op">(</span>Eto<span class="op">.</span><span class="fu">Platforms</span><span class="op">.</span><span class="fu">Wpf</span><span class="op">).</span><span class="fu">Run</span><span class="op">(</span><span class="kw">new</span> <span class="fu">MainForm</span><span class="op">());</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            <span class="co">// GTKの場合</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="kw">new</span> <span class="fu">Application</span><span class="op">(</span>Eto<span class="op">.</span><span class="fu">Platforms</span><span class="op">.</span><span class="fu">Gtk</span><span class="op">).</span><span class="fu">Run</span><span class="op">(</span><span class="kw">new</span> <span class="fu">MainForm</span><span class="op">());</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>本演習では後者はの部分は変更せずに，前者の<code>MainForm.cs</code>を拡張することで進めていく．すなわち，作成する<code>Form</code>に様々なGUI部品（コントロールと呼ばれる）を追加することになる．</p>
<p>その際は以下のプロパティを適切に設定することが有用であろう．</p>
<table>
<tbody>
<tr class="odd">
<td><code>public string Title</code></td>
<td>ウィンドウのタイトルを表すプロパティ</td>
</tr>
<tr class="even">
<td><code>public Control Content</code></td>
<td>ウィンドウの中身となるGUI部品</td>
</tr>
<tr class="odd">
<td><code>public Size ClientSize</code></td>
<td>中身のサイズ（ボーダーやタイトルバーを除いたサイズ）</td>
</tr>
</tbody>
</table>
<p>またテンプレート生成されたコードでは，以下のプロパティが用いられている．</p>
<table>
<tbody>
<tr class="odd">
<td><code>public MenuBar Menu</code></td>
<td>メニューバーを表す（Macだとウィンドウの中じゃなくて上の部分）</td>
</tr>
<tr class="even">
<td><code>public ToolBar ToolBar</code></td>
<td>ツールバーを表す</td>
</tr>
</tbody>
</table>
<p>では，まずは<code>Title</code>，<code>Content</code>，<code>ClientSize</code>のみを使うように，<code>MainForm.cs</code>で定義されている<code>MainForm</code>クラスのコンストラクタを以下のように変更してみよう．</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">&quot;Hello World&quot;</span><span class="op">;</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// オブジェクト初期化子を利用</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    Content <span class="op">=</span> <span class="kw">new</span> <span class="fu">Label</span><span class="op">()</span> <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span> <span class="op">};</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>以下のようなウィンドウが表示されたことだろう（以下はMacにおける例）</p>
<p><img src="images/eto/hello_world.png" alt="image" /></p>
<p>ところで，Macにおいては左上の「閉じる」ボタンを押してもアプリケーションが終了しないことに気付いたかもしれない．これはいささか不便である．幸いなことに空のMenuBarをMenuに代入すると Mac 環境ではいろいろなアイテムを Eto.Forms が追加してくれる．</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">&quot;Hello World&quot;</span><span class="op">;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    Content <span class="op">=</span> <span class="kw">new</span> <span class="fu">Label</span><span class="op">()</span> <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span> <span class="op">};</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 「空」のメニューバーを追加する．</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// すると，Mac環境においてはMenuプロパティのsetterがいろいろなアイテムを追加してくれる．</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>これで，Command + Q等の標準的な操作でアプリケーションを終了することができるようになる（WpfやGtkだと「閉じる」ボタンで，終了する）．</p>
<p><em>オブジェクト初期化子があれば，引数なしのコンストラクタの括弧は省略できる．</em>たとえば，上の<code>Content =</code>の行は</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Content <span class="op">=</span> <span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span> <span class="op">};</span> </span></code></pre></div>
<p>とも書ける．</p>
</section>
<section id="コントロールgui部品" class="level2">
<h2>コントロール（GUI部品）</h2>
<p>さて，上記にあった <code>Label</code> は単に与えられたテキストを表示するという<strong>コントロール</strong>（GUI部品）である．たとえば，よく使うコントロールは <code>Label</code>を含め以下のようなものであろう．</p>
<table>
<thead>
<tr class="header">
<th>コントロール（を表すクラス）</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Label</code></td>
<td>テキストを画面に表示する</td>
</tr>
<tr class="even">
<td><code>Button</code></td>
<td>その名の通りボタン</td>
</tr>
<tr class="odd">
<td><code>TextBox</code></td>
<td>一行のテキストを入力できる欄</td>
</tr>
<tr class="even">
<td><code>TextArea</code></td>
<td>複数行のテキストを入力できる欄．スクロールバー付き</td>
</tr>
</tbody>
</table>
<p>Eto.Formsでは他にも様々なコントロールが提供されている．たとえば以下など．</p>
<table>
<thead>
<tr class="header">
<th>コントロール（を表すクラス）</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>CheckBox</code></td>
<td>ラベル付きのチェックボックス</td>
</tr>
<tr class="even">
<td><code>RadioButton</code></td>
<td>ラジオボタン（一個 on にすると他が off になるボタン）</td>
</tr>
<tr class="odd">
<td><code>DropDown</code></td>
<td>ドロップダウンリスト</td>
</tr>
<tr class="even">
<td><code>ImageView</code></td>
<td>画像の表示</td>
</tr>
<tr class="odd">
<td><code>Slider</code></td>
<td>「つまみ」を縦か横に動かして値を決める部品</td>
</tr>
</tbody>
</table>
</section>
<section id="コンテナコントロールを保持するもの" class="level2">
<h2>コンテナ（コントロールを保持するもの）</h2>
<p>コントロールを複数個（1個のみのときもある）保持するコントロールは<strong>コンテナ</strong>と呼ばれる．</p>
<p>スクロールを可能にする<code>Scrollable</code>，タブでコントロールを切り替えられる<code>TabControl</code>，二つのコントロールを区切り線で分ける<code>Splitter</code>や次項で説明するレイアウトがある．また，<code>Form</code>もコントロールを一個保持するようなコンテナの一つである．</p>
</section>
<section id="レイアウト" class="level2">
<h2>レイアウト</h2>
<p><strong>レイアウト</strong>はコンテナの一種であり，コントロールを適切な位置に並べてくれる．
Eto.Formsの提供する代表的なレイアウトに以下のようなものがある．</p>
<table>
<tbody>
<tr class="odd">
<td><code>StackLayout</code></td>
<td>横または縦の一方向にコントロールを並べるレイアウト</td>
</tr>
<tr class="even">
<td><code>TableLayout</code></td>
<td>表のセルのようにコントロールを配置するレイアウト</td>
</tr>
<tr class="odd">
<td><code>DynamicLayout</code></td>
<td>縦と横を切り替えつつコントロールを並べるレイアウト</td>
</tr>
</tbody>
</table>
<p>ここでは，<code>StackLayout</code>と<code>TableLayout</code>について紹介する．</p>
<section id="stacklayoutの例" class="level3">
<h3><code>StackLayout</code>の例</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">&quot;StackLayout Example&quot;</span><span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    StackLayout stackLayout <span class="op">=</span> <span class="kw">new</span> <span class="fu">StackLayout</span><span class="op">();</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// stackLayout自体と「中身」との間のスペース</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Padding</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// stackLayoutの各コンポーネント間のスペース</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Spacing</span> <span class="op">=</span>  <span class="dv">5</span><span class="op">;</span> </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// コンポーネントの配置の方向を指定（Orientation.Horizontalなら横）．</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// デフォルトが縦なので，この文は実は不要</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Orientation</span> <span class="op">=</span> Orientation<span class="op">.</span><span class="fu">Vertical</span><span class="op">;</span> </span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 横方向の配置位置．HorizontalAlignment.Stretchは左も右もいっぱいまで伸ばす．</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">HorizontalContentAlignment</span> <span class="op">=</span> HorizontalAlignment<span class="op">.</span><span class="fu">Stretch</span><span class="op">;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Label．日本語も書けるよ！&quot;</span> <span class="op">});</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Button&quot;</span> <span class="op">});</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 縦に伸べるTextArea．伸びないようにするには二つ目の引数をfalseにする．</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> <span class="fu">StackLayoutItem</span><span class="op">(</span><span class="kw">new</span> TextArea <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;1</span><span class="sc">\n</span><span class="st">22</span><span class="sc">\n</span><span class="st">333&quot;</span> <span class="op">},</span> <span class="kw">true</span><span class="op">));</span> </span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> TextBox <span class="op">{</span> PlaceholderText <span class="op">=</span> <span class="st">&quot;なにか入力&quot;</span> <span class="op">});</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    Content <span class="op">=</span> stackLayout<span class="op">;</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>上記の実行例（Macの場合）</p>
<p><img src="images/eto/stack_layout.png" alt="image" /></p>
<p>上のプログラムでは下記のプロパティを使った．</p>
<table>
<thead>
<tr class="header">
<th>プロパティ名</th>
<th>大雑把な説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Padding</code></td>
<td>StackLayout自体とその中身の間のスペース</td>
</tr>
<tr class="even">
<td><code>Spacing</code></td>
<td>StackLayoutに含まれる各コントロール間のスペース（<code>int</code>型）</td>
</tr>
<tr class="odd">
<td><code>Orientation</code></td>
<td>StackLayoutの方向．<code>Orientation.Vertical</code>か<code>Orientation.Horizontal</code>か．</td>
</tr>
<tr class="even">
<td><p><code>HorizontalContentAlignment</code></p></td>
<td><p><code>Orientation</code>が <code>Orientation.Vertical</code>のときの各コントロールの水平位置
<code>HorizontalAlignment.Left</code>，<code>HorizontalAlignment.Right</code>，
<code>HorizontalAlignment.Center</code>，<code>HorizontalAlignment.Stretch</code>のいずれか</p></td>
</tr>
<tr class="odd">
<td><p><code>VerticalContentAlignment</code></p></td>
<td><p>上の縦版．<code>VerticalAlignment.Top</code>，<code>VerticalAlignment.Bottom</code>，
<code>VerticalAlignment.Center</code>，<code>VerticalAlignment.Stretch</code>のいずれか</p></td>
</tr>
<tr class="even">
<td><code>Items</code></td>
<td>保持するコントロールのコレクション．読み出し専用（代入できないという意味）</td>
</tr>
</tbody>
</table>
<p>正確には<code>Items</code>は<code>StackLayoutItem</code>を保持するコレクションである．C#では暗黙の型変換をユーザが定義することができ，各コントロールの基底クラスである<code>Control</code>から<code>StackLayoutItem</code>への型変換が定義されているため，コントロールを直接<code>Items</code>へ<code>Add</code>メソッドを使って追加することができる．また，<code>StackLayoutItem</code>のコンストラクタ<code>StackLayoutItem(Control, bool)</code>を使うことにより，そのコントロールが<code>Orientation</code>に沿って伸長するかどうかを指定できる．</p>
<div class="note">
<div class="title">
<p>Note</p>
</div>
<p>上記はオブジェクト初期化子とコレクション初期化子（<code>new List&lt;int&gt; {1,2,3,4}</code>の<code>{1,2,3,4}</code>の部分）を使うことで，以下のようにより簡潔に記述できる．</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a> <span class="op">{</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>     Title <span class="op">=</span> <span class="st">&quot;StackLayout Example&quot;</span><span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>     ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>     Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>     <span class="co">// オブジェクト初期化子を使った方法</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>     Content <span class="op">=</span> <span class="kw">new</span> StackLayout</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>     <span class="op">{</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>         Padding <span class="op">=</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>         Spacing <span class="op">=</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>         Orientation <span class="op">=</span> Orientation<span class="op">.</span><span class="fu">Vertical</span><span class="op">,</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>         HorizontalContentAlignment <span class="op">=</span> HorizontalAlignment<span class="op">.</span><span class="fu">Stretch</span><span class="op">,</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>         <span class="co">// Items は read-only プロパティだが，オブジェクト初期化子中に</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>         <span class="co">// Items = {a, b, c, d} と書くことで Items.Add(a), Items.Add(b), Items.Add(c), Items.Add(d) </span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>         <span class="co">// をオブジェクト生成後に呼ぶことができる</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>         Items <span class="op">=</span> <span class="op">{</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>             <span class="kw">new</span> Label  <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Label. 日本語も書けるよ！&quot;</span> <span class="op">},</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>             <span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Button&quot;</span> <span class="op">},</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>             <span class="kw">new</span> <span class="fu">StackLayoutItem</span> <span class="op">(</span> <span class="kw">new</span> TextArea <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;1</span><span class="sc">\n</span><span class="st">22</span><span class="sc">\n</span><span class="st">333&quot;</span> <span class="op">},</span> <span class="kw">true</span> <span class="op">),</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>             <span class="kw">new</span> TextBox <span class="op">{</span> PlaceholderText <span class="op">=</span> <span class="st">&quot;なにか入力&quot;</span> <span class="op">}</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>         <span class="op">}</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>     <span class="op">};</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span></code></pre></div>
</div>
<section id="練習問題" class="level4">
<h4>練習問題</h4>
<p>上記のプログラムを少し改変してみて挙動の変化を確認してみよう．たとえば，以下等をしてみるとよい．</p>
<ul>
<li><code>Orientation</code> を変えてみる</li>
<li>紹介されたが上の例では使われなかったプロパティを使ってみる</li>
<li><code>Padding</code>や<code>Spacing</code>を変えてみる</li>
<li>同じコントロールを複数追加してみる</li>
<li><code>StackLayoutItem</code>コンストラクタの第二引数にfalseを渡してみる</li>
<li>あるいは，コントロール<code>c</code>を追加する際に<code>Add(c)</code>を<code>Add(new StackLayoutItem (c, true)</code>としてみる</li>
</ul>
</section>
</section>
<section id="tablelayoutの例" class="level3">
<h3><code>TableLayout</code>の例</h3>
<p><code>TableLayout</code>は Eto.Forms の提供するレイアウトのうち基本となるものであり（<code>StackLayout</code>や<code>DynamicLayout</code>も内部でTableLayoutを使用している），表組みのようなレイアウトを実現する．</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">&quot;TableLayout Example&quot;</span><span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">400</span><span class="op">,</span> <span class="dv">400</span><span class="op">);</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    TableLayout tableLayout <span class="op">=</span> <span class="kw">new</span> <span class="fu">TableLayout</span><span class="op">();</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 横と縦のパディングを指定（4引数バージョンもある）</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    tableLayout<span class="op">.</span><span class="fu">Padding</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">Padding</span><span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// tableLayoutのSpacingは横と縦の両方を指定</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    tableLayout<span class="op">.</span><span class="fu">Spacing</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    tableLayout<span class="op">.</span><span class="fu">Rows</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">TableRow</span><span class="op">(</span><span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Apple&quot;</span> <span class="op">},</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>                     <span class="co">// 横方向に伸長するセル</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">new</span> <span class="fu">TableCell</span><span class="op">(</span><span class="kw">new</span> TextBox <span class="op">{</span> <span class="op">},</span> <span class="kw">true</span><span class="op">),</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Banana&quot;</span> <span class="op">}));</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    tableLayout<span class="op">.</span><span class="fu">Rows</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">TableRow</span><span class="op">(</span><span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Cabbage&quot;</span> <span class="op">},</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">new</span> TextArea <span class="op">{</span> <span class="op">},</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>                     <span class="co">// TableLayout.AutoSized は中の要素が伸長しないセルを作る（このセルは伸長する行に置かれている）</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>                     TableLayout<span class="op">.</span><span class="fu">AutoSized</span><span class="op">(</span><span class="kw">new</span> DropDown <span class="op">{</span> Items <span class="op">=</span> <span class="op">{</span> <span class="st">&quot;Item 1&quot;</span><span class="op">,</span> <span class="st">&quot;Item 2&quot;</span><span class="op">,</span> <span class="st">&quot;Item 3&quot;</span> <span class="op">}</span> <span class="op">}))</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="co">// この行は伸長する							 </span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> ScaleHeight <span class="op">=</span> <span class="kw">true</span> <span class="op">});</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    tableLayout<span class="op">.</span><span class="fu">Rows</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">TableRow</span><span class="op">(</span><span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Tuna&quot;</span> <span class="op">},</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                     <span class="co">// null は伸長する何もないセル</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">null</span><span class="op">,</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Bonito&quot;</span> <span class="op">}));</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 以下をアンコメントしたらどうなる？</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">// tableLayout.Rows.Add(null); // 伸長する何もない行の追加</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    Content <span class="op">=</span> tableLayout<span class="op">;</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>上記の実行例（Macの場合）</p>
<p><img src="images/eto/table_layout.png" alt="image" /></p>
<p>上のプログラムでは下記の<code>TableLayout</code>のプロパティを使った．</p>
<table>
<thead>
<tr class="header">
<th>プロパティ名</th>
<th>大雑把な説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Padding</code></td>
<td>TableLayout自体とその中身の間のスペース</td>
</tr>
<tr class="even">
<td><code>Spacing</code></td>
<td>TableLayoutに含まれる各コントロール間のスペース（<code>Size</code>型）</td>
</tr>
<tr class="odd">
<td><code>Rows</code></td>
<td>各要素がTableRowであるコレクション（読み出し専用）</td>
</tr>
</tbody>
</table>
<p>また，TableRowの以下のコンストラクタおよびプロパティを使用した．</p>
<table>
<thead>
<tr class="header">
<th>メンバ名</th>
<th>大雑把な説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>TableRow(TableCell c1, ..., TableCell cn)</code></td>
<td>セル <code>c1</code>, ... , <code>cn</code> を含んだ行を作るコンストラクタ</td>
</tr>
<tr class="even">
<td><code>ScaleHeight</code></td>
<td>行が伸長可能かどうか</td>
</tr>
</tbody>
</table>
<p><code>StackLayoutItem</code>のときと同様に<code>Control</code>から<code>TableCell</code>への暗黙の型変換が定義されている．そのため，それを利用することで，<code>Control</code>型の<code>new Label { Text = "Apple" }</code>等をそのまま<code>TableRow</code>コンストラクタの引数に渡すことができる．セルの横幅を伸長可能にしたい場合は上記のようにコンストラクタ<code>TableCell(Control, bool)</code>を使用する．</p>
<p><code>TableLayout.AutoSized</code> というstatic メソッドは伸長するセルの中に伸長したくないコントロールを配置するのに使う．</p>
<section id="練習問題-1" class="level4">
<h4>練習問題</h4>
<p>上記のプログラムを少し改変してみて挙動の変化を確認してみよう．たとえば，以下等をしてみるとよい．</p>
<ul>
<li>「以下をアンコメントしたらどうなる？」に従ってみる</li>
<li><code>TableLayout.AutoSized</code>を使わないでみる．あるいは<code>TextArea</code>を追加する際に<code>AutoSized</code>を使ってみる</li>
<li><code>Padding</code>や<code>Spacing</code>を変えてみる</li>
<li>同じコントロールを複数追加してみる</li>
<li><code>StackLayout</code>のときのように，オブジェクト初期化子をできるだけ活用する形にプログラムを変更してみる</li>
</ul>
</section>
</section>
<section id="レイアウトを組み合せる" class="level3">
<h3>レイアウトを組み合せる</h3>
<p>レイアウトを組み合わせることで，複雑なレイアウトを実現することができる．</p>
<p>たとえば</p>
<pre class="asciiart"><code>(Button1) (Button2) (Button3) [TextBox                     ]
+----------------------------------------------------------+
| TextArea                                                 |
|                                                          |
|                                                          |
|                                                          |
|                                                          |
+----------------------------------------------------------+
Label</code></pre>
<p>という配置は，StackLayoutを組み合わせることにより実現可能である．</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">&quot;Combining Layout Example&quot;</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">600</span><span class="op">,</span> <span class="dv">400</span><span class="op">);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    StackLayout headerPart <span class="op">=</span> <span class="kw">new</span> <span class="fu">StackLayout</span><span class="op">();</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    headerPart<span class="op">.</span><span class="fu">Orientation</span> <span class="op">=</span> Orientation<span class="op">.</span><span class="fu">Horizontal</span><span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    headerPart<span class="op">.</span><span class="fu">Spacing</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    headerPart<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;戻る&quot;</span> <span class="op">});</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    headerPart<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;進む&quot;</span> <span class="op">});</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    headerPart<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;再読込&quot;</span> <span class="op">});</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    headerPart<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> <span class="fu">StackLayoutItem</span><span class="op">(</span><span class="kw">new</span> TextBox <span class="op">{</span> PlaceholderText <span class="op">=</span> <span class="st">&quot;アドレス&quot;</span> <span class="op">},</span> <span class="kw">true</span><span class="op">));</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    StackLayout mainPart <span class="op">=</span> <span class="kw">new</span> <span class="fu">StackLayout</span><span class="op">();</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    mainPart<span class="op">.</span><span class="fu">Spacing</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    mainPart<span class="op">.</span><span class="fu">Padding</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    mainPart<span class="op">.</span><span class="fu">HorizontalContentAlignment</span> <span class="op">=</span> HorizontalAlignment<span class="op">.</span><span class="fu">Stretch</span><span class="op">;</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    mainPart<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span>headerPart<span class="op">);</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    mainPart<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> <span class="fu">StackLayoutItem</span><span class="op">(</span><span class="kw">new</span> TextArea <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;本文用テキストエリア&quot;</span> <span class="op">},</span> <span class="kw">true</span><span class="op">));</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    mainPart<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;ステータスバー&quot;</span> <span class="op">});</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    Content <span class="op">=</span> mainPart<span class="op">;</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>上記の実行例（Macの場合）</p>
<p><img src="./images/eto/combined_layout.png" alt="image" /></p>
</section>
</section>
<section id="ボタンを押したときの動作" class="level2">
<h2>ボタンを押したときの動作</h2>
<p>さて，これまではGUI部品を配置するだけで，GUI部品がなにか面白いことをすることはなかった．ここではボタンを押したときの動作を実装してみよう．</p>
<p>まずは非常に単純なアプリケーションを作ってみる．このアプリケーションの画面には一つのボタンと一つのラベルがあるのみである．ボタンを押すと，ラベルにボタンを押した回数が表示されるというものである．各コントロールの配置は適当でよい．</p>
<p>コントロールの配置だけを考えれば以下のようなプログラム（<code>MainForm</code>コンストラクタのみ抜粋）が書けるだろう．</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">&quot;Button Example&quot;</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    Button countButton <span class="op">=</span> <span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Count&quot;</span> <span class="op">};</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    Label countLabel <span class="op">=</span> <span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;0&quot;</span> <span class="op">};</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    StackLayout stackLayout <span class="op">=</span> <span class="kw">new</span> <span class="fu">StackLayout</span><span class="op">();</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Padding</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">HorizontalContentAlignment</span> <span class="op">=</span> HorizontalAlignment<span class="op">.</span><span class="fu">Stretch</span><span class="op">;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> <span class="fu">StackLayoutItem</span><span class="op">(</span>countLabel<span class="op">,</span> <span class="kw">true</span><span class="op">));</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span>countButton<span class="op">);</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    Content <span class="op">=</span> stackLayout<span class="op">;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>上記の実行例（Macの場合）</p>
<p><img src="./images/eto/button_layout_only.png" alt="image" /></p>
<section id="イベントハンドラの登録" class="level3">
<h3>イベントハンドラの登録</h3>
<p>ボタン<code>button</code>を押したときに，なにかをさせたい場合は以下のように<code>button.Click</code>イベントにハンドラを登録すればよい．</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// クリックされたときに YOUR_METHOD(イベント発生させたオブジェクト，EventArgs型のオブジェクト) が呼び出される</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>button<span class="op">.</span><span class="fu">Click</span> <span class="op">+=</span> YOUR_METHOD<span class="op">;</span> </span></code></pre></div>
<p>C#ではクラスやオブジェクトはイベント（のハンドラを格納するもの）を持つことができる．実際に<code>Click</code>は</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// EventHandlerについては https://docs.microsoft.com/dotnet/api/system.eventhandler-1 参照</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">event</span> EventHandler<span class="op">&lt;</span>EventArgs<span class="op">&gt;</span> Click<span class="op">;</span> </span></code></pre></div>
<p>という<code>Button</code>の（インスタンス）メンバとして宣言されている．</p>
<p>イベントはフィールドやプロパティとは異なり，その当該のクラスからしか発生させる（イベントハンドラを呼び出す）ことができない（なので，派生クラスからイベントを発生させたい場合は，基底クラスのほうでイベント発生をラップする protected ないし public なメソッドを用意する必要がある）．ただし，イベントはそのクラスの外でも購読（イベントハンドラを登録する）ことができる．上記の<code>+=</code>は<code>button.Click</code>というイベントを購読する（あるいは"button.Click"というイベントに対するイベントハンドラを登録する）ための構文である．また，イベントの購読解除も行うことができ，対応する構文は<code>-=</code>である．</p>
<p>さて，上記の<code>YOUR_METHOD</code>の部分はstatic メソッドでもそうでない通常のメソッド（インスタンスメソッド）でもよいが，今回の目的でもっとも簡潔なのは以下に紹介する<strong>ラムダ式</strong>を使う方法である．</p>
</section>
<section id="匿名関数ラムダ式" class="level3">
<h3>匿名関数（ラムダ式）</h3>
<p>匿名関数を作成するため式（ラムダ式）の基本的な構文は以下である．</p>
<pre style="line-height:1.3">
(<span class="metaname">引数の列</span>) => 
{
      <span class="metaname">文</span>
      ...
      <span class="metaname">文</span>
}
</pre>
<p>たとえば，上記のボタンの例だと</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cnt <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">// sとeは無名関数のパラメータ．型はオプショナル</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>countButton<span class="op">.</span><span class="fu">Click</span> <span class="op">+=</span> <span class="op">(</span>s<span class="op">,</span> e<span class="op">)</span> <span class="op">=&gt;</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// あたり前に感じるかもしれないが，無名関数の中身の部分では，</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// その外側で定義された変数にもアクセスできる．</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    cnt<span class="op">++;</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    countLabel<span class="op">.</span><span class="fu">Text</span> <span class="op">=</span> cnt<span class="op">.</span><span class="fu">ToString</span><span class="op">();</span> </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>のように書く．<code>MainForm</code>コンストラクタ全体は以下のようになる．</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">&quot;Button Example&quot;</span><span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    Button countButton <span class="op">=</span> <span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Count&quot;</span> <span class="op">};</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    Label countLabel <span class="op">=</span> <span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;0&quot;</span> <span class="op">};</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> cnt <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    countButton<span class="op">.</span><span class="fu">Click</span> <span class="op">+=</span> <span class="op">(</span>s<span class="op">,</span> e<span class="op">)</span> <span class="op">=&gt;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        cnt<span class="op">++;</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        countLabel<span class="op">.</span><span class="fu">Text</span> <span class="op">=</span> cnt<span class="op">.</span><span class="fu">ToString</span><span class="op">();</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    StackLayout stackLayout <span class="op">=</span> <span class="kw">new</span> <span class="fu">StackLayout</span><span class="op">();</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Padding</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">HorizontalContentAlignment</span> <span class="op">=</span> HorizontalAlignment<span class="op">.</span><span class="fu">Stretch</span><span class="op">;</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> <span class="fu">StackLayoutItem</span><span class="op">(</span>countLabel<span class="op">,</span> <span class="kw">true</span><span class="op">));</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span>countButton<span class="op">);</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    Content <span class="op">=</span> stackLayout<span class="op">;</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="note">
<div class="title">
<p>Note</p>
</div>
<p>インスタンスメソッドを使った場合は，たとえば，<code>MainForm</code>のインスタンスを用いる場合は</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MainForm <span class="op">:</span> Form</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">int</span> cnt <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Label countLabel<span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">countUp</span><span class="op">(</span><span class="dt">object</span> sender<span class="op">,</span> EventArgs e<span class="op">)</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        cnt<span class="op">++;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        countLabel<span class="op">.</span><span class="fu">Text</span> <span class="op">=</span> cnt<span class="op">.</span><span class="fu">ToString</span><span class="op">();</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        Title <span class="op">=</span> <span class="st">&quot;Button Example&quot;</span><span class="op">;</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>        ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>        Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>        Button countButton <span class="op">=</span> <span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Count&quot;</span> <span class="op">};</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>        countLabel <span class="op">=</span> <span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;0&quot;</span> <span class="op">};</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>        countButton<span class="op">.</span><span class="fu">Click</span> <span class="op">+=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">countUp</span><span class="op">;</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>        StackLayout stackLayout <span class="op">=</span> <span class="kw">new</span> <span class="fu">StackLayout</span><span class="op">();</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">Padding</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">HorizontalContentAlignment</span> <span class="op">=</span> HorizontalAlignment<span class="op">.</span><span class="fu">Stretch</span><span class="op">;</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> <span class="fu">StackLayoutItem</span><span class="op">(</span>countLabel<span class="op">,</span> <span class="kw">true</span><span class="op">));</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span>countButton<span class="op">);</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>        Content <span class="op">=</span> stackLayout<span class="op">;</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>となり，あるいはカウントやラベルの情報を格納するためだけのクラスを作る場合は</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode cs"><code class="sourceCode cs"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MainForm <span class="op">:</span> Form</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">class</span> countUpClass</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> Label label<span class="op">;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> <span class="fu">countUpClass</span><span class="op">(</span><span class="dt">int</span> c<span class="op">,</span> Label l<span class="op">)</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> c<span class="op">;</span> label <span class="op">=</span> l<span class="op">;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">countUp</span><span class="op">(</span><span class="dt">object</span> sender<span class="op">,</span> EventArgs e<span class="op">)</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>            count<span class="op">++;</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>            label<span class="op">.</span><span class="fu">Text</span> <span class="op">=</span> count<span class="op">.</span><span class="fu">ToString</span><span class="op">();</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">MainForm</span><span class="op">()</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>        Title <span class="op">=</span> <span class="st">&quot;Button Example&quot;</span><span class="op">;</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>        ClientSize <span class="op">=</span> <span class="kw">new</span> <span class="fu">Size</span><span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>        Menu <span class="op">=</span> <span class="kw">new</span> <span class="fu">MenuBar</span><span class="op">();</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        Button countButton <span class="op">=</span> <span class="kw">new</span> Button <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;Count&quot;</span> <span class="op">};</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        Label countLabel <span class="op">=</span> <span class="kw">new</span> Label <span class="op">{</span> Text <span class="op">=</span> <span class="st">&quot;0&quot;</span> <span class="op">};</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>        countButton<span class="op">.</span><span class="fu">Click</span> <span class="op">+=</span> <span class="kw">new</span> <span class="fu">countUpClass</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> countLabel<span class="op">).</span><span class="fu">countUp</span><span class="op">;</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>        StackLayout stackLayout <span class="op">=</span> <span class="kw">new</span> <span class="fu">StackLayout</span><span class="op">();</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">Padding</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">HorizontalContentAlignment</span> <span class="op">=</span> HorizontalAlignment<span class="op">.</span><span class="fu">Stretch</span><span class="op">;</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> <span class="fu">StackLayoutItem</span><span class="op">(</span>countLabel<span class="op">,</span> <span class="kw">true</span><span class="op">));</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>        stackLayout<span class="op">.</span><span class="fu">Items</span><span class="op">.</span><span class="fu">Add</span><span class="op">(</span>countButton<span class="op">);</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>        Content <span class="op">=</span> stackLayout<span class="op">;</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>のようになる．</p>
</div>
</section>
</section></section>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
